@import "tailwindcss";

/* Dynamic color palette - overridden by API values via useColorPalette */
:root {
  --color-primary: #e26729;
  --color-primary-foreground: #ffffff;
  --color-background: #f4f4f4;
  --color-foreground: #000000;
  --color-surface: #f4f4f4;
  --color-surface-alt: #efefef;
  --color-muted: #efefef;
  --color-muted-foreground: #818181;
  --color-border: #cccccc;
  --color-destructive: #b20101;
  --color-destructive-foreground: #ffffff;
  --color-destructive-light: #fef2f2;
  --color-destructive-border: #fca5a5;
  --color-warning: #FAE55F;
  --color-warning-foreground: #854d0e;
  --color-warning-light: #fefce8;
  --color-warning-border: #fde68a;
  --color-success: #2d8a4e;
  --color-success-foreground: #ffffff;
  --color-success-light: #f0fdf4;
  --color-success-border: #86efac;
  --color-info: #5bbad5;
  --color-info-foreground: #1a1a1a;
  --color-info-light: #eff6ff;
  --color-info-border: #93c5fd;
  --color-accent: #efefef;
  --color-accent-foreground: #000000;
  --color-nav-background: #303030;
  --color-nav-text: #ffffff;
  --color-nav-hover: rgba(255, 255, 255, 0.1);
  --color-nav-active: rgba(255, 255, 255, 0.2);
  --color-nav-border: rgba(255, 255, 255, 0.1);
  --color-text-on-dark: #ffffff;
  --color-text-on-color: #ffffff;
  --color-button-primary: #e26729;
  --color-button-secondary: #818181;
  --color-availability-available: rgba(91, 186, 213, 0.12);
  --color-availability-preferred: rgba(45, 138, 78, 0.12);
  --color-availability-unavailable: rgba(178, 1, 1, 0.10);
}

body {
  margin: 0;
  min-width: 320px;
  min-height: 100vh;
  font-family: system-ui, -apple-system, sans-serif;
  background-color: var(--color-background);
  color: var(--color-foreground);
}

/* Skeleton loading animation */
@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.skeleton {
  background: linear-gradient(90deg, var(--color-muted) 25%, var(--color-border) 50%, var(--color-muted) 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s ease-in-out infinite;
  border-radius: 0.375rem;
}

/* Toast animation */
@keyframes toast-in {
  from { transform: translateY(100%); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

@keyframes toast-out {
  from { transform: translateY(0); opacity: 1; }
  to { transform: translateY(100%); opacity: 0; }
}

/* Mobile touch targets — scoped to standard interactive elements.
   Uses .touch-compact to opt out for toggle switches, grid shift blocks,
   inline icon buttons, and other compact UI controls that set their own size. */
@media (max-width: 640px) {
  button:not(.touch-compact),
  select:not(.touch-compact),
  a:not(.touch-compact) {
    min-height: 44px;
  }

  /* Elements with role="button" added by libraries (e.g. dnd-kit) should NOT
     get forced sizing — they manage their own dimensions. */
  [role="button"] {
    min-height: unset;
  }
}

/* Print container: hidden on screen */
.print-container {
  display: none;
}

/* @page must be top-level (not inside @media) for Chrome to apply it */
@page {
  margin: 3mm;
}

/* Print styles */
@media print {
  /* Hide everything except print container */
  body > *:not(#print-root) {
    display: none !important;
  }
  #print-root {
    display: block !important;
  }

  /* Body reset */
  body {
    background: white;
    color: black;
    margin: 0;
    padding: 0;
    min-width: 0;
    font-size: 9pt;
  }

  /* Ensure colors print */
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  /* Page header */
  .print-page-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    font-size: 7pt;
    border-bottom: 0.5pt solid var(--color-muted-foreground);
    padding-bottom: 0.5mm;
    margin-bottom: 1mm;
  }

  .print-event-name {
    font-weight: bold;
    font-size: 8pt;
  }

  /*
   * Grid table — base styles (A4 landscape / A3 portrait default)
   * table-layout: fixed + width: 100% = columns share remaining
   * space equally after the name column. The name column gets a
   * fixed width; every time-slot column is identical.
   */
  .print-grid-table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
    font-size: 7pt;
  }

  /* Repeat time header row on every printed page */
  .print-grid-table thead {
    display: table-header-group;
  }

  .print-grid-table th,
  .print-grid-table td {
    border: 0.5pt solid #999;
    padding: 0.3mm 0.3mm;
    text-align: center;
    overflow: hidden;
    white-space: nowrap;
  }

  .print-hour-start {
    border-left: 1.5pt solid #333;
  }

  .print-grid-table tr {
    break-inside: avoid;
  }

  .print-name-col {
    width: 25mm;
    max-width: 25mm;
    text-align: left;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    border-right: 1.5pt solid #333;
  }

  .print-shift-cell {
    font-weight: bold;
    font-size: 7pt;
  }

  .print-coverage-row td {
    font-size: 6pt;
  }

  /* Page breaks */
  .print-day-break {
    break-before: page;
  }

  /* List layout */
  .print-list-user {
    break-inside: avoid;
    margin-bottom: 4mm;
  }

  .print-list-user-name {
    font-size: 10pt;
    font-weight: bold;
    border-bottom: 0.5pt solid var(--color-border);
    padding-bottom: 0.5mm;
    margin-bottom: 1mm;
  }

  .print-list-day-header {
    font-size: 8pt;
    font-weight: bold;
    padding-left: 3mm;
    margin-top: 1mm;
  }

  .print-list-shift {
    font-size: 8pt;
    display: flex;
    gap: 2mm;
    padding-left: 6mm;
  }

  .print-team-dot {
    display: inline-block;
    width: 2.5mm;
    height: 2.5mm;
    flex-shrink: 0;
    margin-top: 0.5mm;
  }

  /* Cross-midnight date indicator */
  .print-cross-midnight {
    color: #666;
    font-style: italic;
  }

  /* --- A4 portrait: narrow (194mm), tall — smallest fonts --- */
  #print-root[data-format="A4-portrait"] {
    font-size: 7pt;
  }
  #print-root[data-format="A4-portrait"] .print-event-name {
    font-size: 8pt;
  }
  #print-root[data-format="A4-portrait"] .print-grid-table {
    font-size: 6pt;
  }
  #print-root[data-format="A4-portrait"] .print-name-col {
    width: 20mm;
    max-width: 20mm;
  }
  #print-root[data-format="A4-portrait"] .print-shift-cell {
    font-size: 6pt;
  }
  #print-root[data-format="A4-portrait"] .print-coverage-row td {
    font-size: 5pt;
  }
  #print-root[data-format="A4-portrait"] .print-list-user-name {
    font-size: 9pt;
  }
  #print-root[data-format="A4-portrait"] .print-list-day-header {
    font-size: 7pt;
  }
  #print-root[data-format="A4-portrait"] .print-list-shift {
    font-size: 7pt;
  }

  /* --- A4 landscape / A3 portrait: medium (281mm) — base sizes, no overrides needed --- */

  /* --- A3 landscape: wide (404mm) — largest fonts --- */
  #print-root[data-format="A3-landscape"] {
    font-size: 10pt;
  }
  #print-root[data-format="A3-landscape"] .print-event-name {
    font-size: 12pt;
  }
  #print-root[data-format="A3-landscape"] .print-grid-table {
    font-size: 9pt;
  }
  #print-root[data-format="A3-landscape"] .print-name-col {
    width: 30mm;
    max-width: 30mm;
  }
  #print-root[data-format="A3-landscape"] .print-shift-cell {
    font-size: 9pt;
  }
  #print-root[data-format="A3-landscape"] .print-coverage-row td {
    font-size: 7pt;
  }
  #print-root[data-format="A3-landscape"] .print-list-user-name {
    font-size: 12pt;
  }
  #print-root[data-format="A3-landscape"] .print-list-day-header {
    font-size: 9pt;
  }
  #print-root[data-format="A3-landscape"] .print-list-shift {
    font-size: 9pt;
  }

  /* Remove shadows */
  .shadow-lg,
  .shadow-md,
  .shadow {
    box-shadow: none !important;
  }
}
